<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
  </head>
  <body>
    <h1>Welcome to the app</h1>
    <p>Your token is <strong id="user_token"></strong></p>
    <p>
      <a href="" id="attacker_url">
        Go to the attackerâ€™s website and notice that your token has been
        captured.
      </a>
    </p>
    <script src="app.js"></script>
    <script>
      let analyticsEndpoint = "http://local.analytics.io:8081";
      let attackerEndpoint = "http://local.attacker.xxx:8083";
      if (window.location.host.endsWith("appspot.com")) {
        analyticsEndpoint =
          "https://analytics-dot-local-storage-security.appspot.com";
        attackerEndpoint =
          "https://attacker-dot-local-storage-security.appspot.com";
      }
      document
        .getElementById("attacker_url")
        .setAttribute("href", attackerEndpoint);
      (function(i, s, o, g) {
        (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
        a.async = 1;
        a.src = g;
        m.parentNode.insertBefore(a, m);
      })(window, document, "script", `${analyticsEndpoint}/analytics.js`);
    </script>
  </body>
</html>
